language: python
build_image: shippableimages/ubuntu1404_python 
python:
  - 2.7
  
install:
  - mkdir -p ~/workspace
  - cd ~/workspace
  - git clone https://github.com/shadow-robot/sr-build-tools.git
  - cd ./sr-build-tools
  - git checkout F_hosted_build_support
  - sudo apt-get update
  - sudo apt-get install python-dev libxml2-dev libxslt-dev python-pip -y
  - sudo pip install ansible

before_script:
  - cd ~/workspace/sr-build-tools/ansible

script:
  - sudo ansible-playbook -v -i "localhost," -c local docker_site.yml --tags "install,create_workspace,update_dependencies,build,unit_tests,shippable" -e "dependencies_file=$SHIPPABLE_REPO_DIR/tooro/project.rosinstall,shippable_repo_dir=$SHIPPABLE_REPO_DIR"

