language: python
build_image: shippableimages/ubuntu1404_python
python:
  - 2.7


install:
  - sudo apt-get update
  - sudo apt-get install curl -y

script:
  - export toolset_branch="F#116_semaphore_ci_support"
  - export server_type="shippable"
#  - export used_modules="check_cache,install,create_workspace,unit_tests,code_coverage"
  - export used_modules="check_cache,install,create_workspace,unit_tests"
  - export remote_shell_script="https://raw.githubusercontent.com/shadow-robot/sr-build-tools/$toolset_branch/bin/sr-run-ci-build.sh"
  - curl -s "$( echo "$remote_shell_script" | sed 's/#/%23/g' )" | bash /dev/stdin "$toolset_branch" $server_type $used_modules
#  - ls -al $SHIPPABLE_REPO_DIR/shippable/codecoverage
#  - mv $SHIPPABLE_REPO_DIR/shippable/codecoverage/coverage.xml $SHIPPABLE_REPO_DIR/shippable/codecoverage/coverage.cpp.xml
#  - ls -al $SHIPPABLE_REPO_DIR/shippable/codecoverage
#  - rm -f $SHIPPABLE_REPO_DIR/shippable/codecoverage/.coverage
#  - ls -al $SHIPPABLE_REPO_DIR/shippable/codecoverage
#  - sudo apt-get install cobertura
#  - cobertura-merge --datafile $SHIPPABLE_REPO_DIR/shippable/codecoverage/cobertura.xml  $SHIPPABLE_REPO_DIR/shippable/codecoverage/coverage.python.xml $SHIPPABLE_REPO_DIR/shippable/codecoverage/coverage.cpp.xml
#  - rm -f $SHIPPABLE_REPO_DIR/shippable/codecoverage/coverage.python.xml
#  - rm -f $SHIPPABLE_REPO_DIR/shippable/codecoverage/coverage.cpp.xml

